# ======================================================
#   Upapada Lagna (UL) Calculator
#   Jaimini ë°©ì‹ â€” 12Hì˜ Pada (ì •í†µ ê·œì¹™ í¬í•¨)
# ======================================================

def house_distance(start, end):
    if end >= start:
        return end - start
    return (12 - start) + end


def calc_UL(lord_positions, house_lords):
    """
    Upapada Lagna ê³µì‹ (ì •í†µ Jaimini):
    1) 12Hì˜ ë¡œë“œ ì°¾ê¸°
    2) 12H â†’ ë¡œë“œê¹Œì§€ ê±°ë¦¬ ê³„ì‚°
    3) UL = ë¡œë“œí•˜ìš°ìŠ¤ + ê±°ë¦¬
    4) ì˜ˆì™¸ ê·œì¹™:
       - ë¡œë“œê°€ 12H ìžê¸° ìžë¦¬ â†’ UL = 10H
       - ë¡œë“œê°€ 12Hë¡œë¶€í„° 7ì¹¸ ë’¤ â†’ UL = 4H
       - ULì´ 12Hì´ë©´ 1Hë¡œ ì´ë™
    """

    lord = house_lords[12]
    lord_house = lord_positions[lord]

    # ------------------------------------------------------
    # ðŸ”¥ ì˜ˆì™¸ ê·œì¹™ 1: ë¡œë“œê°€ 12H ìžê¸° ìžë¦¬
    # ------------------------------------------------------
    if lord_house == 12:
        return 10

    # ------------------------------------------------------
    # ðŸ”¥ ì˜ˆì™¸ ê·œì¹™ 2: ë¡œë“œê°€ 12Hì—ì„œ ì •í™•ížˆ 7ì¹¸ ë’¤
    #     12 â†’ 6 ì€ distance = 7
    # ------------------------------------------------------
    if house_distance(12, lord_house) == 7:
        return 4

    # ------------------------------------------------------
    # 2) ê±°ë¦¬ ê³„ì‚° (ê¸°ë³¸)
    # ------------------------------------------------------
    dist = house_distance(12, lord_house)

    # 0ì¹¸ì´ë©´ 1ì¹¸ ì²˜ë¦¬
    if dist == 0:
        dist = 1

    # ê¸°ë³¸ UL
    ul = lord_house + dist
    if ul > 12:
        ul -= 12

    # ------------------------------------------------------
    # ðŸ”¥ UL ì „ìš© ì˜ˆì™¸: ê²°ê³¼ê°€ 12Hë©´ 1H
    # ------------------------------------------------------
    if ul == 12:
        ul = 1

    return ul
